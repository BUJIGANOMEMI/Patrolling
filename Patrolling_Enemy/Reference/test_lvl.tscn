[gd_scene load_steps=10 format=3 uid="uid://dfwra0f7cj2de"]

[ext_resource type="PackedScene" uid="uid://co4nfpa72aqf" path="res://Reference/player.tscn" id="1_b4j5o"]
[ext_resource type="PackedScene" uid="uid://uppqsuoml54r" path="res://Reference/enemy.tscn" id="1_hwiex"]
[ext_resource type="PackedScene" uid="uid://dws8w5d6txxys" path="res://Reference/block.tscn" id="3_nlcc3"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_72gj4"]

[sub_resource type="Sky" id="Sky_kxhci"]
sky_material = SubResource("ProceduralSkyMaterial_72gj4")

[sub_resource type="Environment" id="Environment_37c5u"]
background_mode = 2
sky = SubResource("Sky_kxhci")
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)

[sub_resource type="NavigationMesh" id="NavigationMesh_ir4op"]
vertices = PackedVector3Array(-2.5, 0.4975, 0, -2.25, 0.4975, -3, -3.25, 0.4975, -3.75, -6.5, 0.4975, 0, -3.25, 0.4975, -4.75, -2.5, 0.4975, -5.5, -0.5, 0.4975, -19, -6.5, 0.4975, 0, -3.25, 0.4975, -3.75, -3.25, 0.4975, -4.75, -7.25, 0.4975, 0.75, -6.5, 0.4975, 0, -3.25, 0.4975, -4.75, -0.5, 0.4975, -19, -19, 0.4975, -19, -19, 0.4975, 2, -19, 0.4975, 2, -7.25, 0.4975, 2.25, -7.25, 0.4975, 0.75, -2.5, 0.4975, -5.5, -0.5, 0.4975, -5.5, -0.5, 0.4975, -19, 2.5, 0.4975, -4.75, 2.5, 0.4975, -4, 5, 0.4975, -3, 1.75, 0.4975, -5.5, 2.5, 0.4975, -4.75, 5, 0.4975, -3, 9.5, 0.4975, -3.25, 1.75, 0.4975, -5.5, 9.5, 0.4975, -3.25, 19, 0.4975, -1.25, 19, 0.4975, -19, -0.5, 0.4975, -19, 10.25, 0.4975, -2.5, 10.25, 0.4975, -1, 19, 0.4975, -1.25, 9.5, 0.4975, -3.25, 10.25, 0.4975, -2.5, 19, 0.4975, -1.25, -0.5, 0.4975, -19, -0.5, 0.4975, -5.5, 1.75, 0.4975, -5.5, -1.75, 0.4975, 5.25, -0.25, 0.4975, 6, 0.5, 0.4975, 5, -1.5, 0.4975, 0.75, 4.5, 0.4975, -2.5, 5, 0.4975, -3, 2.5, 0.4975, -4, 1.75, 0.4975, -3, 1.75, 0.4975, -3, -2.25, 0.4975, -3, -1.5, 0.4975, 0.75, 0.5, 0.4975, 5, 4.5, 0.4975, 1.75, 4.5, 0.4975, -2.5, 5, 0.4975, 5.25, 5.5, 0.4975, 2.5, 4.5, 0.4975, 1.75, 0.5, 0.4975, 5, -2.25, 0.4975, -3, -2.5, 0.4975, 0, -1.5, 0.4975, 0.75, 6.5, 3.2475, -1.25, 6.5, 3.2475, 0.5, 8.25, 3.2475, 0.5, 8.25, 3.2475, -1.25, 5.5, 0.4975, 2.5, 5, 0.4975, 5.25, 5.5, 0.4975, 5.75, 9.5, 0.4975, 2.5, 19, 0.4975, -1.25, 10.25, 0.4975, -1, 10.25, 0.4975, 1.75, 9.5, 0.4975, 2.5, 5.5, 0.4975, 5.75, 5.5, 0.4975, 7.75, 10.25, 0.4975, 1.75, 9.5, 0.4975, 2.5, 5.5, 0.4975, 7.75, 19, 0.4975, 8, 19, 0.4975, -1.25, 6.75, 0.4975, -1, 6.75, 0.4975, 0.25, 8, 0.4975, 0.25, 8, 0.4975, -1, -0.25, 0.4975, 6, -1.75, 0.4975, 5.25, -2.25, 0.4975, 5.75, -0.25, 0.4975, 10, -0.25, 0.4975, 6, -2.25, 0.4975, 5.75, -6.5, 0.4975, 5.75, -6.5, 0.4975, 5.75, -7.25, 0.4975, 5, -19, 0.4975, 2, 1.75, 0.4975, 19, 2, 0.4975, 10.75, 0.5, 0.4975, 10.75, 0.5, 0.4975, 10.75, -0.25, 0.4975, 10, -6.5, 0.4975, 5.75, -19, 0.4975, 2, -19, 0.4975, 19, 1.75, 0.4975, 19, -7.25, 0.4975, 5, -7.25, 0.4975, 2.25, -19, 0.4975, 2, -5.25, 3.2475, 2, -5.25, 3.2475, 3.75, -3.5, 3.2475, 3.75, -3.5, 3.2475, 2, -5, 0.4975, 2.25, -5, 0.4975, 3.5, -3.75, 0.4975, 3.5, -3.75, 0.4975, 2.25, 1.75, 3.2475, 7, 1.75, 3.2475, 8.75, 3.5, 3.2475, 8.75, 3.5, 3.2475, 7, 2, 0.4975, 7.25, 2, 0.4975, 8.5, 3.25, 0.4975, 8.5, 3.25, 0.4975, 7.25, 4.75, 0.4975, 10.75, 2, 0.4975, 10.75, 1.75, 0.4975, 19, 5.5, 0.4975, 10, 4.75, 0.4975, 10.75, 1.75, 0.4975, 19, 19, 0.4975, 19, 19, 0.4975, 8, 19, 0.4975, 8, 5.5, 0.4975, 7.75, 5.5, 0.4975, 10)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(6, 5, 4), PackedInt32Array(9, 8, 7), PackedInt32Array(11, 10, 12), PackedInt32Array(12, 10, 15), PackedInt32Array(12, 15, 14), PackedInt32Array(12, 14, 13), PackedInt32Array(18, 17, 16), PackedInt32Array(21, 20, 19), PackedInt32Array(24, 23, 22), PackedInt32Array(26, 25, 27), PackedInt32Array(27, 25, 28), PackedInt32Array(30, 29, 31), PackedInt32Array(31, 29, 32), PackedInt32Array(32, 29, 33), PackedInt32Array(36, 35, 34), PackedInt32Array(39, 38, 37), PackedInt32Array(42, 41, 40), PackedInt32Array(44, 43, 45), PackedInt32Array(45, 43, 46), PackedInt32Array(48, 47, 49), PackedInt32Array(49, 47, 50), PackedInt32Array(56, 55, 51), PackedInt32Array(51, 55, 52), PackedInt32Array(52, 55, 53), PackedInt32Array(53, 55, 54), PackedInt32Array(58, 57, 59), PackedInt32Array(59, 57, 60), PackedInt32Array(63, 62, 61), PackedInt32Array(67, 66, 64), PackedInt32Array(64, 66, 65), PackedInt32Array(69, 68, 70), PackedInt32Array(70, 68, 71), PackedInt32Array(74, 73, 72), PackedInt32Array(77, 76, 75), PackedInt32Array(79, 78, 80), PackedInt32Array(80, 78, 81), PackedInt32Array(81, 78, 82), PackedInt32Array(86, 85, 83), PackedInt32Array(83, 85, 84), PackedInt32Array(89, 88, 87), PackedInt32Array(91, 90, 92), PackedInt32Array(92, 90, 93), PackedInt32Array(96, 95, 94), PackedInt32Array(99, 98, 97), PackedInt32Array(101, 100, 102), PackedInt32Array(102, 100, 105), PackedInt32Array(102, 105, 104), PackedInt32Array(102, 104, 103), PackedInt32Array(108, 107, 106), PackedInt32Array(112, 111, 109), PackedInt32Array(109, 111, 110), PackedInt32Array(116, 115, 113), PackedInt32Array(113, 115, 114), PackedInt32Array(120, 119, 117), PackedInt32Array(117, 119, 118), PackedInt32Array(124, 123, 121), PackedInt32Array(121, 123, 122), PackedInt32Array(127, 126, 125), PackedInt32Array(129, 128, 130), PackedInt32Array(130, 128, 131), PackedInt32Array(131, 128, 132), PackedInt32Array(135, 134, 133)]
agent_radius = 1.0

[sub_resource type="QuadMesh" id="QuadMesh_4h4at"]

[sub_resource type="BoxShape3D" id="BoxShape3D_8o3lu"]
size = Vector3(1, 1, 0.01)

[node name="Test_Lvl" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.586189, 0.810175, 0, -0.810175, 0.586189, -28.5378, 5.68826, 12.5896)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_37c5u")

[node name="Player" parent="." instance=ExtResource("1_b4j5o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 6)

[node name="Enemy" parent="." instance=ExtResource("1_hwiex")]
transform = Transform3D(-0.999614, 0, 0.0277821, 0, 1, 0, -0.0277821, 0, -0.999614, 0, 1, -7.26879)

[node name="all_patrolling_points_Guard1" type="Node3D" parent="."]

[node name="point_1" type="Marker3D" parent="all_patrolling_points_Guard1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.62333, 0.0864981, -16.3659)

[node name="point_2" type="Marker3D" parent="all_patrolling_points_Guard1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.07537, 0, 7.69047)

[node name="point_3" type="Marker3D" parent="all_patrolling_points_Guard1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.09979, 0, -8.15596)

[node name="last_point" type="Marker3D" parent="all_patrolling_points_Guard1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, 7)

[node name="reset_guard_rotation" type="Node3D" parent="."]

[node name="posted_guard1_look_at" type="Marker3D" parent="reset_guard_rotation"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.238941, 0, 27.2986)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_ir4op")

[node name="floor" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(40, 0, 0, 0, -1.74846e-06, 40, 0, -40, -1.74846e-06, 0, 0, 0)
mesh = SubResource("QuadMesh_4h4at")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/floor/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 3.55271e-15, 0, -3.55271e-15, 1, 0, 1.98606e-10, -0.00454358)
shape = SubResource("BoxShape3D_8o3lu")

[node name="block" parent="NavigationRegion3D" instance=ExtResource("3_nlcc3")]
transform = Transform3D(3.505, 0, 0, 0, 3.505, 0, 0, 0, 0.22848, -0.30719, 1, -4.35019)

[node name="block2" parent="NavigationRegion3D" instance=ExtResource("3_nlcc3")]
transform = Transform3D(3.505, 0, 0, 0, 3.505, 0, 0, 0, 3.505, -4.30719, 1, 2.87648)

[node name="block3" parent="NavigationRegion3D" instance=ExtResource("3_nlcc3")]
transform = Transform3D(3.505, 0, 0, 0, 3.505, 0, 0, 0, 3.505, 2.63695, 1, 7.90305)

[node name="block4" parent="NavigationRegion3D" instance=ExtResource("3_nlcc3")]
transform = Transform3D(3.505, 0, 0, 0, 3.505, 0, 0, 0, 3.505, 7.25962, 1, -0.404984)
